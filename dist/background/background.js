(()=>{"use strict";new class{constructor(){this.init()}init(){chrome.contextMenus.removeAll((()=>{chrome.contextMenus.create({id:"readSelection",title:"Read this aloud",contexts:["selection"]})})),this.setupListeners()}setupListeners(){chrome.contextMenus.onClicked.addListener(((e,t)=>{"readSelection"===e.menuItemId&&t?.id&&chrome.tabs.sendMessage(t.id,{action:"readSelection",text:e.selectionText||""})})),chrome.runtime.onMessage.addListener(((e,t,s)=>{if("getSettings"===e.action)return chrome.storage.sync.get({voice:"en-US-AvaNeural",speed:1},(e=>{s(e)})),!0}))}}})();