(()=>{"use strict";class e{constructor(){this.voiceSelect=null,this.speedSlider=null,this.speedValue=null,this.startButton=null,this.stopButton=null,this.initializeElements(),this.setupEventListeners(),this.loadSavedSettings()}async loadSavedSettings(){const e=await chrome.storage.sync.get({voice:"en-US-AvaNeural",speed:1});this.voiceSelect&&(this.voiceSelect.value=e.voice),this.speedSlider&&(this.speedSlider.value=e.speed.toString()),this.speedValue&&(this.speedValue.textContent=`${e.speed.toFixed(2)}x`)}initializeElements(){this.voiceSelect=document.getElementById("voiceSelect"),this.speedSlider=document.getElementById("speedSlider"),this.speedValue=document.getElementById("speedValue"),this.startButton=document.getElementById("startReading"),this.stopButton=document.getElementById("stopReading")}setupEventListeners(){this.voiceSelect&&this.speedSlider&&this.speedValue&&this.startButton&&this.stopButton?(this.speedSlider.addEventListener("input",(()=>{const e=parseFloat(this.speedSlider?.value||"1.0");this.speedValue&&(this.speedValue.textContent=`${e.toFixed(2)}x`),chrome.storage.sync.set({speed:e})})),this.voiceSelect.addEventListener("change",(()=>{chrome.storage.sync.set({voice:this.voiceSelect?.value})})),this.startButton.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0].id&&this.voiceSelect&&this.speedSlider&&chrome.tabs.sendMessage(e[0].id,{action:"startReading",voice:this.voiceSelect.value,speed:parseFloat(this.speedSlider.value)},(e=>{chrome.runtime.lastError&&console.error("Error:",chrome.runtime.lastError)}))}))})),this.stopButton.addEventListener("click",(()=>{chrome.tabs.query({active:!0,currentWindow:!0},(e=>{e[0].id&&chrome.tabs.sendMessage(e[0].id,{action:"stopReading"},(e=>{chrome.runtime.lastError&&console.error("Error:",chrome.runtime.lastError)}))}))}))):console.error("Required elements not found")}}document.addEventListener("DOMContentLoaded",(()=>{new e}))})();